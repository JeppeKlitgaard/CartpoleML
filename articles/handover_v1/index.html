
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.2.1">
    
    
      
        <title>Handover from 10 week internship - CartER</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.e8d9bf0c.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.e6a45f82.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../extra/css/image_alignment.css">
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent="">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#handover-from-10-week-internship" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="CartER" class="md-header__button md-logo" aria-label="CartER" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CartER
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Handover from 10 week internship
            
          </span>
        </div>
      </div>
    </div>
    
      <form class="md-header__option" data-md-component="palette">
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_1">
          
            <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_2" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m17.75 4.09-2.53 1.94.91 3.06-2.63-1.81-2.63 1.81.91-3.06-2.53-1.94L12.44 4l1.06-3 1.06 3 3.19.09m3.5 6.91-1.64 1.25.59 1.98-1.7-1.17-1.7 1.17.59-1.98L15.75 11l2.06-.05L18.5 9l.69 1.95 2.06.05m-2.28 4.95c.83-.08 1.72 1.1 1.19 1.85-.32.45-.66.87-1.08 1.27C15.17 23 8.84 23 4.94 19.07c-3.91-3.9-3.91-10.24 0-14.14.4-.4.82-.76 1.27-1.08.75-.53 1.93.36 1.85 1.19-.27 2.86.69 5.83 2.89 8.02a9.96 9.96 0 0 0 8.02 2.89m-1.64 2.02a12.08 12.08 0 0 1-7.8-3.47c-2.17-2.19-3.33-5-3.49-7.82-2.81 3.14-2.7 7.96.31 10.98 3.02 3.01 7.84 3.12 10.98.31z"/></svg>
            </label>
          
        
          
          
          <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent=""  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_2">
          
            <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_1" hidden>
              <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 7a5 5 0 0 1 5 5 5 5 0 0 1-5 5 5 5 0 0 1-5-5 5 5 0 0 1 5-5m0 2a3 3 0 0 0-3 3 3 3 0 0 0 3 3 3 3 0 0 0 3-3 3 3 0 0 0-3-3m0-7 2.39 3.42C13.65 5.15 12.84 5 12 5c-.84 0-1.65.15-2.39.42L12 2M3.34 7l4.16-.35A7.2 7.2 0 0 0 5.94 8.5c-.44.74-.69 1.5-.83 2.29L3.34 7m.02 10 1.76-3.77a7.131 7.131 0 0 0 2.38 4.14L3.36 17M20.65 7l-1.77 3.79a7.023 7.023 0 0 0-2.38-4.15l4.15.36m-.01 10-4.14.36c.59-.51 1.12-1.14 1.54-1.86.42-.73.69-1.5.83-2.29L20.64 17M12 22l-2.41-3.44c.74.27 1.55.44 2.41.44.82 0 1.63-.17 2.37-.44L12 22z"/></svg>
            </label>
          
        
      </form>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7 0-.24-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91 1.61 0 2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08z"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/JeppeKlitgaard/CartER/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-tabs__inner md-grid">
    <ul class="md-tabs__list">
      
        
  
  


  <li class="md-tabs__item">
    <a href="../.." class="md-tabs__link">
      Introduction
    </a>
  </li>

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../development/" class="md-tabs__link">
        Development
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../building/" class="md-tabs__link">
        Building
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../usage/" class="md-tabs__link">
        Usage
      </a>
    </li>
  

      
        
  
  
    
  


  
  
  
    <li class="md-tabs__item">
      <a href="../" class="md-tabs__link md-tabs__link--active">
        Articles
      </a>
    </li>
  

      
        
  
  


  
  
  
    <li class="md-tabs__item">
      <a href="../../videos/" class="md-tabs__link">
        Videos
      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="CartER" class="md-nav__button md-logo" aria-label="CartER" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    CartER
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/JeppeKlitgaard/CartER/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Introduction
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" data-md-state="indeterminate" type="checkbox" id="__nav_2" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Development
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Development" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Development
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../development/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../development/installation/" class="md-nav__link">
        Installation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../development/diagram/" class="md-nav__link">
        Diagrammatic overview
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../development/cli/" class="md-nav__link">
        Command-line interface
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../development/cad/" class="md-nav__link">
        CAD Files
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../development/serial/" class="md-nav__link">
        Serial
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../development/stepper/" class="md-nav__link">
        Steppers
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../development/protocol/" class="md-nav__link">
        Protocol
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../development/further_work/" class="md-nav__link">
        Further Work (To-do)
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" data-md-state="indeterminate" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Building
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Building" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Building
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../building/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../building/bom/" class="md-nav__link">
        Bill of Materials
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" data-md-state="indeterminate" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Usage
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Usage" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Usage
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../usage/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Articles
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Articles" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Articles
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../introducing_carter/" class="md-nav__link">
        Introducing CartER
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Handover from 10 week internship
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Handover from 10 week internship
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-works" class="md-nav__link">
    What works
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-does-not-work" class="md-nav__link">
    What does not work
  </a>
  
    <nav class="md-nav" aria-label="What does not work">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rotary-encoders" class="md-nav__link">
    Rotary encoders
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#random-arduino-resets" class="md-nav__link">
    Random Arduino Resets
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#learning-on-the-physical-system" class="md-nav__link">
    Learning on the physical system
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#two-carriage-configuration" class="md-nav__link">
    Two-carriage configuration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-could-be-improved" class="md-nav__link">
    What could be improved
  </a>
  
    <nav class="md-nav" aria-label="What could be improved">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#new-microcontroller" class="md-nav__link">
    New Microcontroller
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#new-stepper-drivers" class="md-nav__link">
    New stepper drivers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#real-time-or-close-to-it-networking" class="md-nav__link">
    Real-time (or close to it) Networking
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-set-up" class="md-nav__link">
    Getting set up
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" data-md-state="indeterminate" type="checkbox" id="__nav_6" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Videos
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Videos" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Videos
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../videos/" class="md-nav__link">
        Introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../videos/movements_using_ppo/" class="md-nav__link">
        Movements using PPO algorithm
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#what-works" class="md-nav__link">
    What works
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-does-not-work" class="md-nav__link">
    What does not work
  </a>
  
    <nav class="md-nav" aria-label="What does not work">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#rotary-encoders" class="md-nav__link">
    Rotary encoders
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#random-arduino-resets" class="md-nav__link">
    Random Arduino Resets
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#learning-on-the-physical-system" class="md-nav__link">
    Learning on the physical system
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#two-carriage-configuration" class="md-nav__link">
    Two-carriage configuration
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-could-be-improved" class="md-nav__link">
    What could be improved
  </a>
  
    <nav class="md-nav" aria-label="What could be improved">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#new-microcontroller" class="md-nav__link">
    New Microcontroller
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#new-stepper-drivers" class="md-nav__link">
    New stepper drivers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#real-time-or-close-to-it-networking" class="md-nav__link">
    Real-time (or close to it) Networking
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#getting-set-up" class="md-nav__link">
    Getting set up
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                
<a href="https://github.com/JeppeKlitgaard/CartER/edit/master/docs/articles/handover_v1.md" title="Edit this page" class="md-content__button md-icon">
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20.71 7.04c.39-.39.39-1.04 0-1.41l-2.34-2.34c-.37-.39-1.02-.39-1.41 0l-1.84 1.83 3.75 3.75M3 17.25V21h3.75L17.81 9.93l-3.75-3.75L3 17.25z"/></svg>
</a>



<h1 id="handover-from-10-week-internship">Handover from 10 week internship<a class="headerlink" href="#handover-from-10-week-internship" title="Permanent link">&para;</a></h1>
<p>This document describes the handover of the project after my (Jeppe Klitgaard)
10 week internship.</p>
<div class="admonition important">
<p class="admonition-title">Last minute change</p>
<p>Before I went home on 2021-09-03 (last day) I got an epiphany that some of the weird
error behaviour I have been experiencing in the last few days originates from
noise from the stepper motor wires.</p>
<p>I have cut some of the cable management zip ties and rearranged the wires to
reduce this effect, as well as disconnected the screw mounting block for the rotary encoders.</p>
<p>If it does turn out that this has fixed the issue, the cables for the steppers will need to be rerouted
to reduce noise transmission after which point the cable management and the rotary encoders
should be able to be reinstated without issue.</p>
<p>It is possible that the noise has damaged some pins or parts of the Arduino Due,
in which case the Due would need to be replaced. This seems unlikely, however.</p>
<ul>
<li>Jeppe</li>
</ul>
</div>
<h2 id="what-works">What works<a class="headerlink" href="#what-works" title="Permanent link">&para;</a></h2>
<ul>
<li>Commander: Simulated Environment (Implemented as a <code>PettingZoo</code>-style <code>ParallelEnv</code>)</li>
<li>Commander: Experimental Environment (Implemented as a <code>PettingZoo</code>-style <code>ParallelEnv</code>)</li>
<li>Commander: Various CLI tools and utilities</li>
<li>Commander: Networking protocol (serial-over-USB based, binary protocol using CPP POD's)</li>
<li>Commander: Tensorboard integration with many diagonsitic metrics</li>
<li>Commander: Profiling utility (<code>yappi</code>-based)</li>
<li>Commander: Unified Simulation/Experiment CLI interface for running experiments</li>
<li>Commander: Thorough logging for easier debugging</li>
<li>Commander: Code is compliant with: <code>mypy (strict)</code>, <code>black</code>, <code>flake8</code>, and <code>isort</code>.</li>
<li>Commander: Code requires Python 3.9+</li>
<li>Commander: GPU (CUDA) integrated ML</li>
<li>Commander: PPO model (from <code>stable-baselines3</code>)</li>
<li>Commander: A2C model (from <code>stable-baselines3</code>)</li>
<li>Controller: Networking protocol</li>
<li>Controller: Interrupt-based stepping</li>
<li>Controller: Limit finding and checking</li>
<li>Controller: Pendulum jiggling</li>
<li>Controller: Checks for angle and position wander during episode (logged in Tensorboard)</li>
<li>Controller: Lossy network stream realignment</li>
<li>Controller: High-level logic controllable over serial</li>
<li>Hardware: The whole 3D printed setup</li>
<li>Hardware: Steppers</li>
<li>Hardware: Stepper drivers</li>
<li>Hardware: 115200 baud Serial-over-USB</li>
<li>Hardware: Belt tensioning system</li>
</ul>
<h2 id="what-does-not-work">What does not work<a class="headerlink" href="#what-does-not-work" title="Permanent link">&para;</a></h2>
<h3 id="rotary-encoders">Rotary encoders<a class="headerlink" href="#rotary-encoders" title="Permanent link">&para;</a></h3>
<p>The rotary encoders have been acting very weird in the last few days.
They are now disabled when the <code>FakeRotaryEncoders</code> flag is <code>true</code>, which has solved intermittent blocking
and crashes. The crashes did not occur consistently or even at a particular point in the code.</p>
<p>Sometimes the Arduino would randomly not exit the jiggling loop, for example.
This is incredibly odd, as no I2C logic is run during that loop, nor by the stepping interrupt.</p>
<p>Perhaps the rotary encoder chip is bad and causes undefined behaviour on the Arduino due to
not acting as a nice I2C slave. Perhaps the Arduino has somehow been damaged,
though hopefully this would not cause such inconsistent, intermittent failures.</p>
<p>This may also be tangentially related to the fact that the rotary encoder does not experience
a magnetic field of ideal strength. This is due to the proximity of the diametrically magnetised
coin magnet to the ferromagnetic ball bearing. This distance should be increased in a later
hardware revision (very easy and unintrusive, just didn't have the time).</p>
<p>This, however, should also not result in the behaviour I saw.</p>
<p>It is also possible that this stems from a bug in the code of the rotary encoder library (AMS_5600),
which I did not fully investigate.</p>
<p>It could also be due to an error in the I2C multiplexer used. Since the Due has two I2C interfaces,
the multiplexer is not strictly needed, though some modification of the AMS_5600 library would
be needed to use both I2C interfaces.</p>
<h3 id="random-arduino-resets">Random Arduino Resets<a class="headerlink" href="#random-arduino-resets" title="Permanent link">&para;</a></h3>
<p>I am getting random Arduino resets and I cannot for the life of me figure out why.</p>
<p>The latest theory is that the noise from the wires going to the stepper motors is causing
overvoltages on some logic lines that will then trigger a reset.</p>
<p>This could be tested by disabling the motor power supply and running the experiment for a few
hours. If no resets occur, it is likely a problem related to electrical noise. I haven't had time
to try this, so please go ahead and try. It is some very long hanging fruit!</p>
<h3 id="learning-on-the-physical-system">Learning on the physical system<a class="headerlink" href="#learning-on-the-physical-system" title="Permanent link">&para;</a></h3>
<p>I have not yet been able to get significant learning using the experimental setup. I believe as of today (my last day),
the experiment will now run for extended periods of time (after disabling the rotary encoders), and so it may learn over the coming weekend.</p>
<p>It could also be that the PPO/A2C algorithms used are not pleased with the inconsistent step intervals (these arise from learning causing the thread to block for tens of millisecs, as well as delays in the USB protocol and on the host computer).</p>
<p>From Tensorboard it is clear that the correct rewards are being calculated and actions are being taken, though
these do not seem to lead to improved behaviour over time - perhaps I simply haven't given it enough time yet.</p>
<p>I don't have any obvious explanations for why the learning is not better than it currently is. I may have missed a critical bug somewhere, but since rewards and actions are both working as expected, I don't think this will be the case. Perhaps model-free reinforcement learning is just very difficult, particularly on noisy, physical systems?</p>
<p>It could also be that the hyperparameters need significant tuning in order to get stable learning to occur.</p>
<h3 id="two-carriage-configuration">Two-carriage configuration<a class="headerlink" href="#two-carriage-configuration" title="Permanent link">&para;</a></h3>
<p>Most of the code is set up to handle two carriages already, though currently the
limit finding/checking routines would need to be updated to work for a two-carriage system as well.</p>
<p>The hardware and electronics are fully compatible with both a one- and two-carriage configuration.</p>
<p>Likely there is also some code on the environment (not agent) level in the Commander that would need fine-tuning.</p>
<p>The two-carriage configuration should only be persued once the one-carriage configuration is fully working and finalised.</p>
<h2 id="what-could-be-improved">What could be improved<a class="headerlink" href="#what-could-be-improved" title="Permanent link">&para;</a></h2>
<h3 id="new-microcontroller">New Microcontroller<a class="headerlink" href="#new-microcontroller" title="Permanent link">&para;</a></h3>
<p>Dealing with the Arduino Due has been somewhat frustrating, and while changing to a different
one at this stage would require some effort, I believe that it would be worth it.</p>
<p>Problematically the Arduino Due has not seen significant work done on it's core software in many years
and the documentation for the board is even poorer than the already poor documentation for 8-bit AVR Arduino boards.</p>
<p>I changed away from the Arduino build system fairly early on after getting frustrated with the terrible usability problems
of it as well as its practically non-existant support for multiple files. Instead, the project now uses <code>platform.io</code>, which
is orders of magnitude more reliable, intuitive, and well-designed.</p>
<p>Ultimately, I think the same should be done for the Arduino.</p>
<p>Since CartER aims to be easy to set up for others and should rely on off-the-shelf parts, I think the <a href="https://www.st.com/en/evaluation-tools/nucleo-h743zi.html">STM Nucleo-144</a> could be a very powerful option:</p>
<ul>
<li>Built-in debugger</li>
<li>400 MHz clock speed</li>
<li>Ethernet support</li>
<li>Higher baudrates possible (limited to 115200 on Due due to bug in Arduino Core😞)</li>
<li>Many pins broken out</li>
<li>Cheap</li>
<li>Readily available</li>
<li><code>mbed</code>-compatible</li>
</ul>
<p>When doing this, it would be very worthwhile to switch away from the Arduino Wiring framework entirely, as this is incredibly poorly documented
and only ever intended for hobbyist use.</p>
<p>Arduino was groundbreaking in that it made access to hobby-level microcontrollers easy and open,
but since then Arm has developed <code>mbed</code> which is also open and is infinitely more polished.</p>
<p><code>mbed</code> even has a full RTOS version, which could be very useful for this project.
This would likely make it possible to reduce fiddliness around the I2C connection with the rotary encoder, as well as a generally nicer code layout.</p>
<p><code>mbed</code> + <a href="https://www.st.com/en/evaluation-tools/nucleo-h743zi.html">STM Nucleo-144</a> is supported in <code>platform.io</code>.
There is an existing library for modern TMC stepper drivers for <code>mbed</code> and writing a quick library for the rotary encoder
should not take long.</p>
<h3 id="new-stepper-drivers">New stepper drivers<a class="headerlink" href="#new-stepper-drivers" title="Permanent link">&para;</a></h3>
<p>Rather than relying on the rather old TMC26X drivers, these should be changed for TMC2208/TMC2209 drivers.</p>
<p>These have far better support and documentation.</p>
<p>They are cheap and more readily available than the TMC26X drivers, which are strictly inferior.</p>
<h3 id="real-time-or-close-to-it-networking">Real-time (or close to it) Networking<a class="headerlink" href="#real-time-or-close-to-it-networking" title="Permanent link">&para;</a></h3>
<p>Using Serial-over-USB is far from ideal and seems to give a 4ms round-trip time in the best of cases (See: <a href="/development/serial">Serial</a>).</p>
<p>Since the STM board has Ethernet capability built in, it might be useful to use Ethernet for networking.
This would allow far lower latency and much more reliable communication than the current implementation.</p>
<p>A real-time ethernet system like EtherCAT could be used if timing becomes critical, though this will likely be overkill.</p>
<p>Alternatively a proper serial connection could be used.
This would require a simple level-shifting board on the controller-side and a serial board to be installed in the computer.</p>
<p>Both of these options are cheap and readily available.</p>
<p>Arguably Ethernet is more commonly found, though configuration can also be more complicated.</p>
<h2 id="getting-set-up">Getting set up<a class="headerlink" href="#getting-set-up" title="Permanent link">&para;</a></h2>
<p>A good way of working is using VSCode with the <code>Remote: SSH</code> functionality.</p>
<p>That way, you get to develop on the powerful workstation and run experiments and simulations on it directly,
but while still using your own IDE configuration and the familiar keyboard of your laptop.</p>
<p>These lines, for example, were written in the rest area upstairs, but on the workstation downstairs in the Physics Lab through seamless integration via SSH and VSCode.</p>
<p>More advice on how to get set up can be found in the other sections of the documentation.</p>

              
            </article>
          </div>
        </div>
        
          <a href="#" class="md-top md-icon" data-md-component="top" data-md-state="hidden">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"/></svg>
            Back to top
          </a>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../introducing_carter/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Introducing CartER" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Introducing CartER
            </div>
          </div>
        </a>
      
      
        
        <a href="../../videos/" class="md-footer__link md-footer__link--next" aria-label="Next: Introduction" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Introduction
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.tabs", "navigation.expand", "navigation.top", "search.suggest", "search.highlight", "search.share"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.bd0b6b67.min.js"}</script>
    
    
      <script src="../../assets/javascripts/bundle.8aa65030.min.js"></script>
      
        <script src="../../extra/js/mathjax_config.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>